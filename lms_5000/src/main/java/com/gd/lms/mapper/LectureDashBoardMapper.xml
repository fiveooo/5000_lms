<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gd.lms.mapper.LectureDashBoardMapper">


	<!-- ///////////////////////////////// 기타 게시판 생성 ////////////////////////////////////// -->
	<insert id="insertSubBoard" parameterType="com.gd.lms.vo.Board">
		INSERT
			INTO board (
			board_name
			, board_type
			, create_date
			, lecture_no
		) VALUES (
			#{boardName}
			, 3
			, now()
			, #{lectureNo}
		)
	</insert>
	<!-- ///////////////////////////////// 과제제출관련////////////////////////////////////// -->
	<!-- 강좌 게시판  -->
	<insert id="insertBoard" parameterType="com.gd.lms.vo.Board">
		INSERT
			INTO board (
			board_name
			, board_type
			, create_date
			, lecture_no
		) VALUES (
			#{boardName}
			, 4
			, now()
			, #{lectureNo}
		)
	<!-- 각 강좌별 개시판 생성 쿼리 -->
	</insert>
	<select id="assignmentBoardList" parameterType="com.gd.lms.vo.Board" resultType="map">
		SELECT
			l.lecture_no,
			b.board_no,
			b.board_name,
			b.board_type
		FROM lecture l INNER JOIN board b ON l.lecture_no = b.lecture_no
		WHERE l.lecture_no= #{lectureNo} and b.board_type=4
	</select>
	
	<!-- 과제 제출 상세 게시판 -->
	 <insert id="insertBoardPost" parameterType="com.gd.lms.vo.BoardPost">
	 	INSERT INTO 
	 		 board_post,
		     board_no,
		     board_post_title,
		     board_post_writer,
		     board_post_createdate,
		     board_post_updatedate,
		     count
		VALUES
		     #{boardNo},
		     #{boardPostTitle},
		     #{boardPostWriter},
			 #{boardPostContent},
		     NOW(),
		     NOW(),
		     0
	 </insert>
</mapper>